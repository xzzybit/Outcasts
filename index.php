<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Project Gallery</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='css/frontpage.css'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>
<body style="color: black;">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" style="color: white; font-family: 'Times New Roman', Times, serif;" href="https://xzzybit.github.io/Outcasts/">Project Gallery<span class="sr-only">(current)</span></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Hameenlinna.html">Hämeenlinna</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Helsinki.html">Helsinki</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Tampere.html">Tampere</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Tallinna.html">Tallinn</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/BnW.html">Black and White</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Balls.html">Lensballs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Nature.html">Nature</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Sun.html">Sunrises</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://xzzybit.github.io/Outcasts/Urban.html">Urban</a>
        </li>
      </ul>
    </div>
  </nav>

<div class="container">

    <h1 class="text-center"> PROJECT GALLERY </h1>
    <div class="frametwo">
        <div><h6 style="font-family: monospace; color: black; font-size: 16px; text-align: center;"> Hello there and welcome!</h6></div>
        <div><p>This website is a web site development project for school made by two students. All pictures are taken and edited
        by us and all rights are reserved. </p></div>
        <div><p>To view photo galleries, you can either click the pictures below, or use the navigation bar above.</p></div>
    </div>
    
    <div class="frame">
    <h2 class="text-center">Hämeenlinna</h2>
    <a href="https://xzzybit.github.io/Outcasts/Hameenlinna.html">
    <img class="img-fluid mx-auto d-block" alt="Hämeenlinna" src="Hämeenlinna/Turuntie.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Helsinki</h2>
    <a href="https://xzzybit.github.io/Outcasts/Helsinki.html">
    <img class="img-fluid mx-auto d-block" alt="Helsinki" src="Helsinki/kirkko.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Tampere</h2>
    <a href="https://xzzybit.github.io/Outcasts/Tampere.html">
    <img class="img-fluid mx-auto d-block" alt="Tampere" src="Tampere/Hiedanranta.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Tallinn</h2>
    <a href="https://xzzybit.github.io/Outcasts/Tallinna.html">
    <img class="img-fluid mx-auto d-block" alt="Tallinna" src="Tallinna/tallinna17.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Lensballs</h2>
    <a href="https://xzzybit.github.io/Outcasts/Balls.html">
    <img class="img-fluid mx-auto d-block" alt="Lensballs" src="Balls/Stone.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Nature</h2>
    <a href="https://xzzybit.github.io/Outcasts/Nature.html">
    <img class="img-fluid mx-auto d-block" alt="Nature" src="Nature/Creeper.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Sunsets</h2>
    <a href="https://xzzybit.github.io/Outcasts/Sun.html">
    <img class="img-fluid mx-auto d-block" alt="Sun" src="Sun/aurinko3.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Urban</h2>
    <a href="https://xzzybit.github.io/Outcasts/Urban.html">
    <img class="img-fluid mx-auto d-block" alt="Urban" src="Urban/Sadnrusty.jpg" height="550px" width="733px">
    </a></div><br>

    <div class="frame">
    <h2 class="text-center">Black and White</h2>
    <a href="https://xzzybit.github.io/Outcasts/BnW.html">
    <img class="img-fluid mx-auto d-block" alt="BlackWhite" src="Black n White/mv2.jpg" height="550px" width="733px">
    </a></div><br>

</div> 

<h2> Post your message! </h2>
<form action='vittusaatana.php' method='post'>
<table>
<tr>
    <td> Name: </td>
    <td><input type='text' name='name' style='width: 200px;' /></td>
</tr>
<tr>
    <td> Email: </td>
    <td><input type='text' name='email' style='width: 200px;' /></td>
</tr>
<tr>
    <td> Message: </td>
    <td><textarea name='message' style='width: 200px; height: 100px;'></textarea></td>
</tr>
<tr>
    <td></td>
    <td><input type='submit' name='postbtn' value='Post' /></td>
</tr>
</table>
</form>

<?php
if (isset($_POST["name"])){
    $name=$_POST["name"];
}
else{
    $name="";
}

if (isset($_POST["email"])){
    $email=$_POST["email"];
}
else{
    $email="";
}

if (isset($_POST["message"])){
    $message=$_POST["message"];
}
else{
    $message="";
}

$yhteys = mysqli_connect("localhost", "root");

// Check connection
if (!$yhteys) {
    die("Yhteyden muodostaminen epäonnistui: " . mysqli_connect_error());
}
echo ""; // debuggia

$tietokanta=mysqli_select_db($yhteys, "guestbook");
if (!$tietokanta) {
    die("Tietokannan valinta epäonnistui: " . mysqli_connect_error());
}
echo ""; // debuggia


if (isset($_POST['postbtn'])) {
    $name = strip_tags($_POST['name']);
    $email = strip_tags($_POST['email']);
    $message = strip_tags($_POST['message']);
    
    if ($name && $email && $message) {
        
        $date = date("F d, Y");
        $time = date("H:i");
        
        //add to the db
        
        $sql=("INSERT INTO guestbook(name, email, message, time, date) values(?, ?, ?, ?, ?)");
        $stmt=mysqli_prepare($yhteys, $sql);
        mysqli_stmt_bind_param($stmt, 'sssss', $name, $email, $message, $time, $date);
        mysqli_stmt_execute($stmt);
        
        echo "Your post has been added.";
        
    }
    else
        echo "You didn't enter in all the required information.";
        
}

$tulos=mysqli_query($yhteys, "SELECT * FROM guestbook ORDER BY id DESC");

echo "<h2> Current Posts </h2>";
echo "<hr/>";
while ($rivi=mysqli_fetch_assoc($tulos)){
    $id =$rivi['id'];
    $name =$rivi['name'];
    $email =$rivi['email'];
    $message =$rivi['message'];
    $time =$rivi['time'];
    $date =$rivi['date'];
    
    $message = nl2br($message);
    
    echo "<div>
                by <b>$name</b> - at <b>$time</b> on <b>$date</b><br/>
                $message
                </div> <hr/";
}

mysqli_close($yhteys);
?>

<footer>
    Copyright © 2020, Project Gallery
</footer>
</body>
</html>